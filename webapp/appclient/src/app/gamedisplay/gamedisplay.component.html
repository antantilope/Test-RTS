<!-- DRAGGABLE PANES -->

<app-allchat *ngIf="_pane.allChatPaneVisible">
</app-allchat>

<app-mainmenu *ngIf="_pane.mainMenuPaneVisible">
</app-mainmenu>

<app-shippane *ngIf="_pane.shipPaneVisible">
</app-shippane>

<!-- end of DRAGGABLE PANES -->

<div id="outer-game-display-container">

    <div id="sidebar-canvas-container" class="game-display-container">
        <div #sidebarElement id="sidebar-container" class="game-display-container">
            <div>
                <button (click)="btnToggleMainMenuPane()" class="sidebar-btn purple-btn" style="padding-top:3px" title="Menu">
                    ‚öôÔ∏è
                </button>
            </div>
            <div class="btn-gap">
            </div>
            <div>
                <button class="sidebar-btn" (click)="_camera.setModeShip()" title="Camera: Ship">
                    üöÄüé•
                </button>
            </div>
            <div>
                <button class="sidebar-btn" (click)="_camera.setModeScanner()" title="Camera: Scanner">
                    üì°üé•
                </button>
            </div>
            <div>
                <button class="sidebar-btn" (click)="_camera.toggleMap()" title="Camera: Map">
                    üó∫Ô∏èüé•
                </button>
            </div>
            <div class="btn-gap">
            </div>
            <div>
                <button class="sidebar-btn gray-btn" (click)="btnToggleShipPane()" title="Ship Menu">
                    üöÄ<span *ngIf="_api.frameData.ship.docked_at_station !== null">üõ∞Ô∏è</span>
                </button>
            </div>
            <div class="btn-gap">
            </div>
            <div>
                <button class="sidebar-btn blue-btn" (click)="btnToggleAllChatPane()" title="All Chat">
                    üí¨
                    <span
                        class="chat-notification-ct"
                        *ngIf="_allchat.unreadCount && !_pane.allChatPaneVisible"
                    >
                        {{ _allchat.unreadCount }}
                    </span>
                </button>
            </div>
        </div>
        <div #graphicsCanvasContainer id="canvas-container" class="game-display-container">
            <canvas #graphicsCanvas id="graphics-2d-canvas">
            </canvas>
        </div>
    </div>
    <div id="command-bar-container" class="game-display-container">

        <div class=command-bar-column>
            <div
                class="command-bar-column-header"
                [ngStyle]="{'color': (_api.frameData.ship.engine_online) ? '#00ff00' : '#ffffff'}"
            >
                <br>ENGINE
            </div>
            <div style="display:flex;">
                <div>
                    <!-- Engine Sub Column 1 -->
                    <div>
                        <button
                            (click)="btnActivateEngine()"
                            class="gd-ctrl-btn"
                            title="Start Engine"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.engine_online || _api.frameData.ship.engine_starting"
                            [ngStyle]="{'color': (_api.frameData.ship.engine_online) ? '#00ff00' : '#000000'}"
                        >
                            START
                        </button>
                    </div>
                    <div>
                        <button
                            (click)="btnDeactivateEngine()"
                            class="gd-ctrl-btn"
                            title="Shutdown Engine"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.engine_online || _api.frameData.ship.engine_starting"
                        >
                            STOP
                        </button>
                    </div>
                </div>
                <div style="margin-left:3px;">
                    <!-- Engine Sub Column 2 -->
                    <div>
                        <button
                            (click)="btnLightEngine()"
                            class="gd-ctrl-btn-orange"
                            title="Fire Engine"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.engine_online || _api.frameData.ship.engine_lit"
                        >
                            IGNITE
                        </button>
                    </div>
                    <div>
                        <button
                            (click)="btnBoostEngine()"
                            class="gd-ctrl-btn-orange"
                            title="Boost Engine"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.engine_online || !_api.frameData.ship.engine_lit"
                        >
                            BOOST
                        </button>
                    </div>
                    <div>
                        <button
                            (click)="btnUnlightEngine()"
                            class="gd-ctrl-btn"
                            title="Stop Engine"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.engine_online || !_api.frameData.ship.engine_lit"
                        >
                            IDLE
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class=command-bar-column>
            <div
                class="command-bar-column-header"
                [ngStyle]="{'color': (_api.frameData.ship.scanner_online) ? '#00ff00' : '#ffffff'}"
            >
                <br>SCANNER
            </div>
            <div style="display:flex;">
                <div>
                    <!-- Scanner Sub Column 1 -->
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            (click)="btnActivateScanner()"
                            title="Activate Scanner"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.scanner_online || _api.frameData.ship.scanner_starting"
                            [ngStyle]="{'color': (_api.frameData.ship.scanner_online) ? '#00ff00' : '#000000'}"
                        >
                            START
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            (click)="btnDeactivateScanner()"
                            title="Deactivate Scanner"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.scanner_online"
                        >
                            STOP
                        </button>
                    </div>
                </div>
                <div style="margin-left:3px;">
                    <!-- Scanner Sub Column 2 -->
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            (click)="btnSetScannerModeRadar()"
                            title="RADAR mode"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.scanner_online || _api.frameData.ship.scanner_mode == 'radar'"
                            [ngStyle]="{'color': (_api.frameData.ship.scanner_online && _api.frameData.ship.scanner_mode == 'radar') ? '#00ff00' : '#000000'}"
                        >
                            RADAR
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            (click)="btnSetScannerModeIR()"
                            title="INFRA RED mode"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.scanner_online || _api.frameData.ship.scanner_mode == 'ir'"
                            [ngStyle]="{'color': (_api.frameData.ship.scanner_online && _api.frameData.ship.scanner_mode == 'ir') ? '#00ff00' : '#000000'}"
                        >
                            IR
                        </button>
                    </div>
                </div>
                <div style="margin-left:5px;">
                    <!-- Scanner Sub Column 3 -->
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            (click)="btnClickScannerCursorUp()"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.scanner_locking || !_api.frameData.ship.scanner_online"
                        >
                            ‚¨ÜÔ∏è
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            (click)="btnClickScannerCursorDown()"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.scanner_locking || !_api.frameData.ship.scanner_online"
                        >
                            ‚¨áÔ∏è
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            (click)="btnClickScannerCursorLock()"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.scanner_locking || !_api.frameData.ship.scanner_online"
                        >
                            lock
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class=command-bar-column>
            <div
                class="command-bar-column-header"
                [ngStyle]="{'color': (_api.frameData.ship.ebeam_can_fire) ? '#00ff00' : '#ffffff'}"
            >
                <br>ENERGY BEAM
            </div>
            <div style="display:flex;">
                <div>
                    <!-- Energy Beam Sub Column 1 -->
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            style="min-width:80px;"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.ebeam_charging || _api.frameData.ship.ebeam_firing"
                            [ngStyle]="{'color': (_api.frameData.ship.ebeam_charging) ? '#00ff00' : '#000000'}"
                            (click)="btnClickChargeEBeam()"
                        >
                            CHARGE
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            style="min-width:80px;"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.ebeam_charging"
                            (click)="btnClickPauseChargeEBeam()"
                        >
                            PAUSE
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn-orange"
                            style="min-width:80px;"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.ebeam_can_fire"
                            (click)="btnClickFireEBeam()"
                        >
                            FIRE
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class=command-bar-column>
            <div class="command-bar-column-header">
                AUTO<br>PILOT
            </div>
            <div style="display:flex;">
                <div>
                    <div>
                        <button
                            class="gd-ctrl-btn-red"
                            [disabled]="!_api.frameData.ship.alive || !_api.frameData.ship.autopilot_program"
                            (click)="btnDisableAutoPilot()"
                        >
                            OFF
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.autopilot_program == 'position_hold'"
                            (click)="btnAutoPilotHaltPosition()"
                            [ngStyle]="{'color': (_api.frameData.ship.autopilot_program == 'position_hold') ? '#00ff00' : '#000000'}"
                        >
                            HALT
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.autopilot_program == 'lock_target' || !_api.frameData.ship.scanner_lock_target || !_api.frameData.ship.scanner_locked"
                            (click)="btnAutoPilotHeadingLockTarget()"
                            [ngStyle]="{'color': (_api.frameData.ship.autopilot_program == 'lock_target') ? '#00ff00' : '#000000'}"
                        >
                            T-TARGET
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.autopilot_program == 'lock_waypoint'"
                            (click)="btnAutoPilotHeadingLockTarget()"
                            [ngStyle]="{'color': (_api.frameData.ship.autopilot_program == 'lock_waypoint') ? '#00ff00' : '#000000'}"
                        >
                            T-WAYPNT
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.autopilot_program == 'lock_prograde'"
                            (click)="btnAutoPilotHeadingLockPrograde()"
                            [ngStyle]="{'color': (_api.frameData.ship.autopilot_program == 'lock_prograde') ? '#00ff00' : '#000000'}"
                        >
                            T-PRO
                        </button>
                    </div>
                    <div>
                        <button
                            class="gd-ctrl-btn"
                            [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.autopilot_program == 'lock_retrograde'"
                            (click)="btnAutoPilotHeadingLockRetrograde()"
                            [ngStyle]="{'color': (_api.frameData.ship.autopilot_program == 'lock_retrograde') ? '#00ff00' : '#000000'}"
                        >
                            T-RETRO
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class=command-bar-column>
            <div
                class="command-bar-column-header"
            >
                UTILITIES
            </div>
            <div id="utility-switch-container">
                <button
                    class="vertical-switch"
                    id="grav-brake-switch-container"
                    (click)="btnClickToggleGravBrake()"
                    [ngStyle]="{'background-color': gravBrakeBtnBkColor, 'color':grabBrakeBtnTxtColor}"
                    [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.gravity_brake_retracting || _api.frameData.ship.gravity_brake_extending"
                >
                    B<br>R<br>A<br>K<br>E
                </button>
                <button
                    class="vertical-switch"
                    (click)="btnToggleAPU()"
                    [ngStyle]="{'background-color': apuBtnBkColor, 'color':apuBtnTxtColor}"
                    [disabled]="!_api.frameData.ship.alive || _api.frameData.ship.apu_starting"
                >
                    A<br>P<br>U
                </button>
                <button
                    class="vertical-switch"
                    (click)="btnToggleMineOre()"
                    [ngStyle]="{'background-color': mineBtnBkColor, 'color':mineBtnTxtColor}"
                    [disabled]="!_api.frameData.ship.parked_at_ore_mine"
                >
                    M<br>I<br>N<br>E
                </button>
            </div>
        </div>
    </div>
</div>
